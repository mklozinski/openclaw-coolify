version: '3.8'

services:
  openclaw:
    build: .
    image: openclaw-coolify
    container_name: openclaw
    restart: unless-stopped
    ports:
      - "18789:18789"
    volumes:
      - ./data:/root/.openclaw
    environment:
      - OPENROUTER_API_KEY=${OPENROUTER_API_KEY}
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
      - OPENCLAW_GATEWAY_TOKEN=${OPENCLAW_GATEWAY_TOKEN}
      - OPENCLAW_MODEL=${OPENCLAW_MODEL:-anthropic/claude-3-opus-20240229}
      - OPENCLAW_CONFIG_CONTENT=${OPENCLAW_CONFIG_CONTENT}
      # Optional: set timezone
      - TZ=UTC
    stdin_open: true # openclaw might need stdin for interactive setup sometimes
    tty: true        # needed for stdin
